<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="我的博客 - blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="https://lives.xtcgch.ink">
    <!--SEO-->

<meta name="description" content="脑容量不够，笔记来凑">





<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>【原理】 Linux之shell命令 | 我的博客 - blog</title>


    <link rel="alternate" href="/atom.xml" title="我的博客 - blog" type="application/atom+xml">


    <link rel="icon" href="https://blog.xtcgch.ink/img/background/海绵宝宝.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    





    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(https://blog.xtcgch.ink/img/head-bg.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="unistd68">
            <img src="/img/background/海绵宝宝.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2> 脑容量不够，笔记来凑 </h2>
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://lives.xtcgch.ink">我的博客 - blog</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>主页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/原理/"><i class="fa "></i>原理</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/实战/"><i class="fa "></i>实战</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/开源/"><i class="fa "></i>开源</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/其他/"><i class="fa "></i>其他</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="【原理】 Linux之shell命令">
            
	            【原理】 Linux之shell命令
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <!-- <a href="https://blog.xtcgch.ink/categories/原理"> -->
        <a href="/categories/原理">
            原理
        </a>
    </span>
    

    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
                
                    <!-- <a href="https://blog.xtcgch.ink/tags/LINUX" title='LINUX'> -->
                    <a href="/tags/LINUX" title="LINUX">
                        LINUX
                    </a>
                
                    <!-- <a href="https://blog.xtcgch.ink/tags/SHELL" title='SHELL'> -->
                    <a href="/tags/SHELL" title="SHELL">
                        SHELL
                    </a>
                
            
        </span>
    </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2018/12/06</span>
        </span>
        
    
</div>

            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>1092</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <p><strong>摘要：</strong>本文主要记录centos系统中常用的shell命令。</p>
<a id="more"></a>
<h1 id="一、进程"><a href="#一、进程" class="headerlink" title="一、进程"></a>一、进程</h1><h2 id="1、查看进程状态"><a href="#1、查看进程状态" class="headerlink" title="1、查看进程状态"></a>1、查看进程状态</h2><p>ps基本命令<br>（1）ps -A：查看所有进程（包括pid，time）<br>（2）ps -a：查看除控制进程和无终端进程外的所有进程<br>（3）ps -d：查看除控制进程外的所有进程<br>（4）ps -ef：查看所有进程的全部信息<br>（5）ps -l：长格式输出<br>（6）ps -f：<br>ps常用命令：<br>（1）ps -aux –sort -pcpu | less | head -n 5：根据cpu占用率降序排序<br>（2） ps -aux –sort -pmem | less：根据内存占用率降序排序<br>（3）ps -aux –sort -pcpu,+pmem | head -n 10：查询cpu和内存占用率最高的10个进程<br>（4）ps -C getty：getty为进程启动的命令，该语句为筛选getty命令启动的进程<br>（5）watch -n 1 ‘ps -aux –sort -pmem, -pcpu  | less |  head 20’：实时监控进程，根据cpu和内存使用率来排序，1秒刷新一次，只显示前20条<br>（6）查看特定进程的情况<br>（7）根据进程名查看进程pid：</p>
<ul>
<li>pgrep -f processname</li>
<li>ps -ef | grep $process | grep -v grep | awk ‘{print $2}’</li>
</ul>
<p>查看系统所有进程的pid：top、ps -ef<br>查看当前用户进程：ps -a<br>把进程状态输出到文件：<br>查看进程的running,sleeping,stopped,zombie状态：top | grep zombie</p>
<h2 id="2、杀死进程"><a href="#2、杀死进程" class="headerlink" title="2、杀死进程"></a>2、杀死进程</h2><p>kill pid<br>kill -9 pid</p>
<h2 id="3、daemon-process（守护进程）"><a href="#3、daemon-process（守护进程）" class="headerlink" title="3、daemon process（守护进程）"></a>3、daemon process（守护进程）</h2><hr>
<h1 id="二、查看磁盘空间"><a href="#二、查看磁盘空间" class="headerlink" title="二、查看磁盘空间"></a>二、查看磁盘空间</h1><h2 id="1、df"><a href="#1、df" class="headerlink" title="1、df"></a>1、df</h2><p>（1）df<br>（2）df -h（因子是1024）<br>（3）df -H（因子是1000）</p>
<h2 id="2、du"><a href="#2、du" class="headerlink" title="2、du"></a>2、du</h2><p>（1）du<br>（2）du -a：可显示个别文件的大小<br>（3）du -c：可查看所有文件大小总和<br>（4）du -s ：只显示合计大小</p>
<h2 id="3、常用命令"><a href="#3、常用命令" class="headerlink" title="3、常用命令"></a>3、常用命令</h2><p>（1）du –max-depth=1 -h：查看当前目录下总大小和当前目录下深度为1的目录或文件的大小<br>（2）du -sh：查看当前目录下总大小<br>（3）du -h –max-depth=0：查看当前目录下总大小<br>（4）du -sh /root/sw ：查看目标目录的大小</p>
<h1 id="三、挂载"><a href="#三、挂载" class="headerlink" title="三、挂载"></a>三、挂载</h1><h2 id="1、mount-t-vfstype-o-options-device-dir"><a href="#1、mount-t-vfstype-o-options-device-dir" class="headerlink" title="1、mount [-t vfstype] [-o options] device dir"></a>1、mount [-t vfstype] [-o options] device dir</h2><p>（1）挂载iso文件<br>mount -o loop -t iso9660 /home/sunky/mydisk.iso /mnt/vcdrom<br>注释：光盘或光盘镜像：iso9660，loop：用来把一个文件当成硬盘分区挂接上系统</p>
<p>（2）挂接移动硬盘<br>无中文：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -t ntfs /dev/sdc1 /mnt/usbhd1</span><br><span class="line">mount -t vfat /dev/sdc5 /mnt/usbhd2</span><br></pre></td></tr></table></figure></p>
<p>有中文：<br>mount -t ntfs -o iocharset=cp936 /dev/sdc1 /mnt/usbhd1</p>
<p>（3）挂载光驱<br>mount /dev/hdc /mnt/cdrom</p>
<p>（4）挂载软驱<br>mount /dev/fd0 /mnt/floppy</p>
<p>附：<br>（1）挂载解决中文问题：使用–o iocharset=cp936或–o iocharset=utf-8</p>
<h2 id="2、umount"><a href="#2、umount" class="headerlink" title="2、umount"></a>2、umount</h2><p>（1）umount 设备：umount /dev/hda5<br>（2）umount 目录：umount /mnt/hda5<br>（3）umount 设备 目录：umount /dev/hda5 /mnt/hda5</p>
<hr>
<h1 id="四、perl"><a href="#四、perl" class="headerlink" title="四、perl"></a>四、perl</h1><h2 id="1、perl脚本"><a href="#1、perl脚本" class="headerlink" title="1、perl脚本"></a>1、perl脚本</h2><p>（1）执行linux命令</p>
<p>（2）</p>
<h2 id="2、perl实现daemon"><a href="#2、perl实现daemon" class="headerlink" title="2、perl实现daemon"></a>2、perl实现daemon</h2><p>参考文献：<a href="https://blog.csdn.net/xuleilx/article/details/8258798" target="_blank" rel="noopener">https://blog.csdn.net/xuleilx/article/details/8258798</a></p>
<p>–</p>
<h1 id="五、软件管理"><a href="#五、软件管理" class="headerlink" title="五、软件管理"></a>五、软件管理</h1><h2 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h2><p>rpm -ivh</p>
<h2 id="2、更新"><a href="#2、更新" class="headerlink" title="2、更新"></a>2、更新</h2><p>rpm -Uvh</p>
<h2 id="3、删除"><a href="#3、删除" class="headerlink" title="3、删除"></a>3、删除</h2><p>rpm -e</p>
<h2 id="4、查询一个包是否被安装"><a href="#4、查询一个包是否被安装" class="headerlink" title="4、查询一个包是否被安装"></a>4、查询一个包是否被安装</h2><p>rpm -q &lt; rpm package name&gt;</p>
<h2 id="5、得到被安装的包的信息"><a href="#5、得到被安装的包的信息" class="headerlink" title="5、得到被安装的包的信息"></a>5、得到被安装的包的信息</h2><p>rpm -qi &lt; rpm package name&gt;</p>
<h2 id="6、列出该包中有哪些文件"><a href="#6、列出该包中有哪些文件" class="headerlink" title="6、列出该包中有哪些文件"></a>6、列出该包中有哪些文件</h2><p>rpm -ql &lt; rpm package name&gt;</p>
<h2 id="7、列出所有被安装的rpm-package"><a href="#7、列出所有被安装的rpm-package" class="headerlink" title="7、列出所有被安装的rpm package"></a>7、列出所有被安装的rpm package</h2><p>rpm -qa</p>
<h2 id="8、显示与目标包名相关的包"><a href="#8、显示与目标包名相关的包" class="headerlink" title="8、显示与目标包名相关的包"></a>8、显示与目标包名相关的包</h2><p>rpm -qa | grep 包名</p>
<hr>
<h1 id="六、查看程序的安装"><a href="#六、查看程序的安装" class="headerlink" title="六、查看程序的安装"></a>六、查看程序的安装</h1><h2 id="1、安装路径"><a href="#1、安装路径" class="headerlink" title="1、安装路径"></a>1、安装路径</h2><p>rpm -qal |grep </p>
<h2 id="2、软件版本"><a href="#2、软件版本" class="headerlink" title="2、软件版本"></a>2、软件版本</h2><p>软件名  -V(–version)</p>
<hr>
<h1 id="七、tcp连接状态"><a href="#七、tcp连接状态" class="headerlink" title="七、tcp连接状态"></a>七、tcp连接状态</h1><h2 id="1、查看8080端口上已经建立连接的tcp连接数"><a href="#1、查看8080端口上已经建立连接的tcp连接数" class="headerlink" title="1、查看8080端口上已经建立连接的tcp连接数"></a>1、查看8080端口上已经建立连接的tcp连接数</h2><p>netstat –nat | grep 8080 | grep ESTABLISHED| wc -l</p>
<hr>
<h1 id="八、网络相关"><a href="#八、网络相关" class="headerlink" title="八、网络相关"></a>八、网络相关</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、netstat -rn    输出路由表</span><br><span class="line">2、netstat -ap   在上面命令的基础上列出连接的PID(进程号)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="九、查看系统信息"><a href="#九、查看系统信息" class="headerlink" title="九、查看系统信息"></a>九、查看系统信息</h1><h2 id="1、内核及发行版"><a href="#1、内核及发行版" class="headerlink" title="1、内核及发行版"></a>1、内核及发行版</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- uname -a </span><br><span class="line">- uname -sr </span><br><span class="line">- cat /etc/issue </span><br><span class="line">- lsb_release -a</span><br></pre></td></tr></table></figure>
<h2 id="2、CPU硬件"><a href="#2、CPU硬件" class="headerlink" title="2、CPU硬件"></a>2、CPU硬件</h2><p>cat /proc/cpuinfo</p>
<h2 id="3、内存情况"><a href="#3、内存情况" class="headerlink" title="3、内存情况"></a>3、内存情况</h2><p>cat /proc/meminfo</p>
<h2 id="4、磁盘、Swap情况"><a href="#4、磁盘、Swap情况" class="headerlink" title="4、磁盘、Swap情况"></a>4、磁盘、Swap情况</h2><p>fdisk -l<br>free -h</p>
<h2 id="5、网络情况"><a href="#5、网络情况" class="headerlink" title="5、网络情况"></a>5、网络情况</h2><ul>
<li>ip a</li>
<li>netstat -tln</li>
<li>netstat -an | grep 80 | grep CONNECTED</li>
</ul>
<h2 id="6、网络协议和端口方面（root）："><a href="#6、网络协议和端口方面（root）：" class="headerlink" title="6、网络协议和端口方面（root）："></a>6、网络协议和端口方面（root）：</h2><ul>
<li>ss -l</li>
<li>ss -ta</li>
<li>ss -s</li>
</ul>
<h2 id="7、网络路由（root）："><a href="#7、网络路由（root）：" class="headerlink" title="7、网络路由（root）："></a>7、网络路由（root）：</h2><ul>
<li>route -n</li>
</ul>
<h2 id="8、查看打开文件："><a href="#8、查看打开文件：" class="headerlink" title="8、查看打开文件："></a>8、查看打开文件：</h2><ul>
<li>lsof -i:22</li>
</ul>
<p>查看物理CPU的个数 ：cat /proc/cpuinfo |grep “physical id”|sort |uniq|wc -l<br>查看逻辑CPU的个数 ：cat /proc/cpuinfo |grep “processor”|wc -l<br>查看CPU是几核：cat /proc/cpuinfo |grep physical |sort -u |wc -l  此命令为查看CPU的个数。<br>查看内存大小：cat /proc/meminfo |  grep -i “memtotal”<br>查看内存插槽：dmidecode -t memory，dmidecode -t 17<br>查看有内存条的插槽：dmidecode -t 17   | grep -i size</p>
<p>CPU内存负载情况-vmstat -afsd<br>内存使用情况：free</p>
<h2 id="9、任务管理器"><a href="#9、任务管理器" class="headerlink" title="9、任务管理器"></a>9、任务管理器</h2><p>top</p>
<ul>
<li>查看特定进程：top -p pid</li>
<li>查看实时消息：top</li>
</ul>
<hr>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a><table><tr><td bgcolor="#C7C7C7">其他</td></tr></table></h1><h2 id="1、发送http请求"><a href="#1、发送http请求" class="headerlink" title="1、发送http请求"></a>1、发送http请求</h2><ul>
<li><p>curl:<a href="https://www.cnblogs.com/coderland/p/5883763.html" target="_blank" rel="noopener">传送门</a></p>
<ul>
<li><p>get请求：curl命令默认下就是使用get方式发送http请求。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl www.baidu.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>post请求:使用-d 后面带 参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -d &quot;param1=value1¶m2=value2&quot; www.baidu.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>wget</p>
<ul>
<li>get请求：<ul>
<li>最基本使用：wget <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a></li>
<li>get方式并指定下载的文件名：wget -O wordpress.zip <a href="http://www.linuxde.net/download.aspx?id=1080" target="_blank" rel="noopener">http://www.linuxde.net/download.aspx?id=1080</a></li>
</ul>
</li>
<li>post请求：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --post-data=&quot;user=user1&amp;pass=pass1&amp;submit=Login&quot;  http://domain.com/path/page_need_login.php</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
</li>
</ul>
<h1 id="一些例子"><a href="#一些例子" class="headerlink" title="一些例子"></a><table><tr><td bgcolor="#C7C7C7">一些例子</td></tr></table></h1><ol>
<li><p>查看xx进程的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep xxx</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看日志文件的最新动态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f xxx.log</span><br></pre></td></tr></table></figure>
<ol>
<li>管道的问题<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># file:note</span><br><span class="line">1234567890</span><br><span class="line">abcdefghij</span><br><span class="line">9876543210</span><br><span class="line">jihgfedcba</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># file；test.sh</span><br><span class="line">#! /bin/bash</span><br><span class="line">index=0</span><br><span class="line">cat note | while read param</span><br><span class="line">do</span><br><span class="line">  let index++</span><br><span class="line">  echo &quot;inter:index($index) param($param)&quot;</span><br><span class="line">done</span><br><span class="line">echo &quot;outer:index($index)&quot;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inter:index(1) param(1234567890)</span><br><span class="line">inter:index(2) param(abcdefghij)</span><br><span class="line">inter:index(3) param(9876543210)</span><br><span class="line">inter:index(4) param(jihgfedcba)</span><br><span class="line">outer:index(0)</span><br></pre></td></tr></table></figure>
<p>原因：</p>
<p>当启用管道时，会生成一个subshell，while循环的代码在subshell中执行，那么变量index也是在subshell中被修改，</p>
<p>while循环结束后，回到主shell，index没有被修改，也就是说，<strong>两个index不是同一个index</strong></p>
<p>while中修改的index是外层index的副本</p>
<p>修正后的代码如下;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># file；test.sh</span><br><span class="line">#! /bin/bash</span><br><span class="line">index=0</span><br><span class="line">while read param</span><br><span class="line">do</span><br><span class="line">  let index++</span><br><span class="line">  echo &quot;inter:index($index) param($param)&quot;</span><br><span class="line">done &lt; note</span><br><span class="line">echo &quot;outer:index($index)&quot;</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inter:index(1) param(1234567890)</span><br><span class="line">inter:index(2) param(abcdefghij)</span><br><span class="line">inter:index(3) param(9876543210)</span><br><span class="line">inter:index(4) param(jihgfedcba)</span><br><span class="line">outer:index(4)</span><br></pre></td></tr></table></figure>
<hr>
<p>下面是一本正经地开始当cv战士了</p>
</li>
</ol>
<h1 id="Shell-不完整教程"><a href="#Shell-不完整教程" class="headerlink" title="Shell 不完整教程"></a><table><tr><td bgcolor="#C7C7C7">Shell 不完整教程</td></tr></table></h1><p>  <a href="http://www.runoob.com/linux/linux-shell-variable.html" target="_blank" rel="noopener">传送门</a></p>
<h2 id="Shell-变量"><a href="#Shell-变量" class="headerlink" title="Shell 变量"></a><font color="#0000FF">Shell 变量</font></h2><p>变量名的命名须遵循如下规则：</p>
<ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>变量名和等号之间不能有空格</li>
<li>不能使用标点符号</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）</li>
</ul>
<ol>
<li><p><strong>只读变量</strong>：readonly</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myUrl=&quot;http://www.google.com&quot;</span><br><span class="line">readonly myUrl</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除变量</strong></p>
</li>
</ol>
<p>使用 unset 命令可以删除变量。</p>
<p>unset 命令不能删除只读变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset variable_name</span><br></pre></td></tr></table></figure>
<h2 id="Shell-字符串"><a href="#Shell-字符串" class="headerlink" title="Shell 字符串"></a><font color="#0000FF">Shell 字符串</font></h2><ol>
<li><strong>获取字符串长度</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=&quot;abcd&quot;</span><br><span class="line">echo $&#123;#string&#125; #输出 4</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>提取子字符串</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=&quot;runoob is a great site&quot;</span><br><span class="line">echo $&#123;string:1:4&#125; # 输出 unoo</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>查找子字符串</strong></li>
</ol>
<p>查找字符 i 或 o 的位置(哪个字母先出现就计算哪个)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=&quot;runoob is a great site&quot;</span><br><span class="line">echo `expr index &quot;$string&quot; io`  # 输出 4</span><br></pre></td></tr></table></figure>
<h2 id="Shell-数组"><a href="#Shell-数组" class="headerlink" title="Shell 数组"></a><font color="#0000FF">Shell 数组</font></h2><ol>
<li><strong>定义数组</strong></li>
</ol>
<p>短小型：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_name=(value0 value1 value2 value3)</span><br></pre></td></tr></table></figure>
<p>随意型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array_name=(</span><br><span class="line">value0</span><br><span class="line">value1</span><br><span class="line">value2</span><br><span class="line">value3</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>折腾型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array_name[0]=value0</span><br><span class="line">array_name[1]=value1</span><br><span class="line">      .</span><br><span class="line">      .</span><br><span class="line">      .</span><br><span class="line">array_name[n]=valuen</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li><strong>读取数组</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valuen=$&#123;array_name[n]&#125;</span><br></pre></td></tr></table></figure>
<p>使用 @ 符号可以获取数组中的所有元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;array_name[@]&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>获取数组的长度</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 取得数组元素的个数</span><br><span class="line">length=$&#123;#array_name[@]&#125;</span><br><span class="line"># 或者</span><br><span class="line">length=$&#123;#array_name[*]&#125;</span><br><span class="line"># 取得数组单个元素的长度</span><br><span class="line">lengthn=$&#123;#array_name[n]&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>Shell 注释</strong></li>
</ol>
<ul>
<li><p>单行注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#--------------------------------------------</span><br><span class="line"># 这是一个注释</span><br><span class="line"># author：</span><br><span class="line"># slogan：学的不仅是技术，更是梦想！</span><br><span class="line">#--------------------------------------------</span><br><span class="line">##### 用户配置区 开始 #####</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># 这里可以添加脚本描述信息</span><br><span class="line"># </span><br><span class="line">#</span><br><span class="line">##### 用户配置区 结束  #####</span><br></pre></td></tr></table></figure>
</li>
<li><p>多行注释</p>
</li>
</ul>
<p>一本正经型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;EOF</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p>
<p>耍小聪明型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;&apos;</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">&apos;</span><br><span class="line"></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">!</span><br></pre></td></tr></table></figure></p>
<h2 id="Shell-传递参数"><a href="#Shell-传递参数" class="headerlink" title="Shell 传递参数"></a><font color="#0000FF">Shell 传递参数</font></h2><p>向脚本传递参数，脚本内获取参数的格式为：$n。n 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推</p>
<p>直接上代码：</p>
<p>shell脚本内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"></span><br><span class="line">echo &quot;Shell 传递参数实例！&quot;;</span><br><span class="line">echo &quot;执行的文件名：$0&quot;;</span><br><span class="line">echo &quot;第一个参数为：$1&quot;;</span><br><span class="line">echo &quot;第二个参数为：$2&quot;;</span><br><span class="line">echo &quot;第三个参数为：$3&quot;;</span><br></pre></td></tr></table></figure></p>
<p>启动命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./test.sh 1 2 3</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">参数处理</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$#</td>
<td style="text-align:left">传递到脚本的参数个数</td>
</tr>
<tr>
<td style="text-align:center">$*</td>
<td style="text-align:left">以一个单字符串显示所有向脚本传递的参数</td>
</tr>
<tr>
<td style="text-align:center">$$</td>
<td style="text-align:left">脚本运行的当前进程ID号</td>
</tr>
<tr>
<td style="text-align:center">$!</td>
<td style="text-align:left">后台运行的最后一个进程的ID号</td>
</tr>
<tr>
<td style="text-align:center">$@</td>
<td style="text-align:left">与$*相同，但是使用时加引号，并在引号中返回每个参数。如”$@”用「”」括起来的情况、以”$1” “$2” … “$n” 的形式输出所有参数。</td>
</tr>
<tr>
<td style="text-align:center">$-</td>
<td style="text-align:left">显示Shell使用的当前选项，与set命令功能相同。</td>
</tr>
<tr>
<td style="text-align:center">$?</td>
<td style="text-align:left">显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td>
</tr>
</tbody>
</table>
<p>demo:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">echo &quot;-- \$* 演示 ---&quot;</span><br><span class="line">for i in &quot;$*&quot;; do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;-- \$@ 演示 ---&quot;</span><br><span class="line">for i in &quot;$@&quot;; do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>$* 与 $@ 区别和联系：</p>
<ul>
<li>相同点：都是引用所有参数。</li>
<li>不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则 “ * “ 等价于 “1 2 3”（传递了一个参数），而 “@” 等价于 “1” “2” “3”（传递了三个参数）。</li>
</ul>
<h2 id="Shell-基本运算符"><a href="#Shell-基本运算符" class="headerlink" title="Shell 基本运算符"></a><font color="#0000FF">Shell 基本运算符</font></h2><ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>布尔运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>
<p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</p>
<ol>
<li><strong>算术运算符</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:菜鸟教程</span><br><span class="line"># url:www.runoob.com</span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">val=`expr $a + $b`</span><br><span class="line">echo &quot;a + b : $val&quot;</span><br><span class="line"></span><br><span class="line">val=`expr $a - $b`</span><br><span class="line">echo &quot;a - b : $val&quot;</span><br><span class="line"></span><br><span class="line">val=`expr $a \* $b`</span><br><span class="line">echo &quot;a * b : $val&quot;</span><br><span class="line"></span><br><span class="line">val=`expr $b / $a`</span><br><span class="line">echo &quot;b / a : $val&quot;</span><br><span class="line"></span><br><span class="line">val=`expr $b % $a`</span><br><span class="line">echo &quot;b % a : $val&quot;</span><br><span class="line"></span><br><span class="line">if [ $a == $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;a 等于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a != $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;a 不等于 b&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注意：</p>
<ul>
<li>表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。</li>
<li>完整的表达式要被 <code></code> 包含，注意这个字符不是常用的单引号，在 Esc 键下边。</li>
<li>乘号(*)前边必须加反斜杠()才能实现乘法运算</li>
</ul>
<ol start="2">
<li><strong>关系运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-eq</td>
<td style="text-align:left">检测两个数是否相等，相等返回 true。</td>
<td style="text-align:left">[ $a -eq $b ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-ne</td>
<td style="text-align:left">检测两个数是否不相等，不相等返回 true。</td>
<td style="text-align:left">[ $a -ne $b ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-gt</td>
<td style="text-align:left">检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td style="text-align:left">[ $a -gt $b ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-lt</td>
<td style="text-align:left">检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td style="text-align:left">[ $a -lt $b ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-ge</td>
<td style="text-align:left">检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left">[ $a -ge $b ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-le</td>
<td style="text-align:left">检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td style="text-align:left">[ $a -le $b ] 返回 true。</td>
</tr>
</tbody>
</table>
<p>上代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">if [ $a -eq $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a -eq $b : a 等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a -eq $b: a 不等于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -ne $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a -ne $b: a 不等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a -ne $b : a 等于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -gt $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a -gt $b: a 大于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a -gt $b: a 不大于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a -lt $b: a 小于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a -lt $b: a 不小于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -ge $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a -ge $b: a 大于或等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a -ge $b: a 小于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -le $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a -le $b: a 小于或等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a -le $b: a 大于 b&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li><strong>布尔运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">!</td>
<td style="text-align:left">非运算，表达式为 true 则返回 false，否则返回 true。</td>
<td style="text-align:left">[ ! false ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-o</td>
<td style="text-align:left">或运算，有一个表达式为 true 则返回 true。</td>
<td style="text-align:left">[ $a -lt 20 -o $b -gt 100 ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-a</td>
<td style="text-align:left">与运算，两个表达式都为 true 才返回 true。</td>
<td style="text-align:left">[ $a -lt 20 -a $b -gt 100 ] 返回 false。</td>
</tr>
</tbody>
</table>
<p>上代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">if [ $a != $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a != $b : a 不等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a != $b: a 等于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt 100 -a $b -gt 15 ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a 小于 100 且 $b 大于 15 : 返回 true&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a 小于 100 且 $b 大于 15 : 返回 false&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt 100 -o $b -gt 100 ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a 小于 100 或 $b 大于 100 : 返回 true&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a 小于 100 或 $b 大于 100 : 返回 false&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a -lt 5 -o $b -gt 100 ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a 小于 5 或 $b 大于 100 : 返回 true&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a 小于 5 或 $b 大于 100 : 返回 false&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li><strong>逻辑运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&amp;&amp;</td>
<td style="text-align:left">逻辑的 AND</td>
<td style="text-align:left">[[ $a -lt 100 &amp;&amp; $b -gt 100 ]] 返回 false</td>
</tr>
<tr>
<td style="text-align:left">两个或符合</td>
<td style="text-align:left">逻辑的 OR</td>
<td style="text-align:left">[[ $a -lt 100</td>
<td></td>
<td>$b -gt 100 ]] 返回 true</td>
</tr>
</tbody>
</table>
<p>简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">if [[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</span><br><span class="line">then</span><br><span class="line">   echo &quot;返回 true&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;返回 false&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [[ $a -lt 100 || $b -gt 100 ]]</span><br><span class="line">then</span><br><span class="line">   echo &quot;返回 true&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;返回 false&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li><strong>字符串运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:left">检测两个字符串是否相等，相等返回 true。</td>
<td style="text-align:left">[ $a = $b ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">!=</td>
<td style="text-align:left">检测两个字符串是否相等，不相等返回 true。</td>
<td style="text-align:left">[ $a != $b ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-z</td>
<td style="text-align:left">检测字符串长度是否为0，为0返回 true。</td>
<td style="text-align:left">[ -z $a ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-n</td>
<td style="text-align:left">检测字符串长度是否为0，不为0返回 true。</td>
<td style="text-align:left">[ -n “$a” ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:left">检测字符串是否为空，不为空返回 true。</td>
<td style="text-align:left">[ $a ] 返回 true。</td>
</tr>
</tbody>
</table>
<p>上代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">a=&quot;abc&quot;</span><br><span class="line">b=&quot;efg&quot;</span><br><span class="line"></span><br><span class="line">if [ $a = $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a = $b : a 等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a = $b: a 不等于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a != $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a != $b : a 不等于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a != $b: a 等于 b&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -z $a ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;-z $a : 字符串长度为 0&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;-z $a : 字符串长度不为 0&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -n &quot;$a&quot; ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;-n $a : 字符串长度不为 0&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;-n $a : 字符串长度为 0&quot;</span><br><span class="line">fi</span><br><span class="line">if [ $a ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;$a : 字符串不为空&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;$a : 字符串为空&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<ol start="6">
<li><strong>文件测试运算符</strong></li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">举例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-b file</td>
<td style="text-align:left">检测文件是否是块设备文件，如果是，则返回 true</td>
<td style="text-align:left">[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-c file</td>
<td style="text-align:left">检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td style="text-align:left">[ -c $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-d file</td>
<td style="text-align:left">检测文件是否是目录，如果是，则返回 true。</td>
<td style="text-align:left">[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-f file</td>
<td style="text-align:left">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td style="text-align:left">[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-g file</td>
<td style="text-align:left">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -g $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-k file</td>
<td style="text-align:left">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td style="text-align:left">[ -k $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-p file</td>
<td style="text-align:left">检测文件是否是有名管道，如果是，则返回 true。</td>
<td style="text-align:left">[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-u file</td>
<td style="text-align:left">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td style="text-align:left">[ -u $file ] 返回 false。</td>
</tr>
<tr>
<td style="text-align:center">-r file</td>
<td style="text-align:left">检测文件是否可读，如果是，则返回 true。</td>
<td style="text-align:left">[ -r $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-w file</td>
<td style="text-align:left">检测文件是否可写，如果是，则返回 true。</td>
<td style="text-align:left">[ -w $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-x file</td>
<td style="text-align:left">检测文件是否可执行，如果是，则返回 true。</td>
<td style="text-align:left">[ -x $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-s file</td>
<td style="text-align:left">检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td style="text-align:left">[ -s $file ] 返回 true。</td>
</tr>
<tr>
<td style="text-align:center">-e file</td>
<td style="text-align:left">检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td style="text-align:left">[ -e $file ] 返回 true。</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">file=&quot;/var/www/runoob/test.sh&quot;</span><br><span class="line">if [ -r $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件可读&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件不可读&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -w $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件可写&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件不可写&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -x $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件可执行&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件不可执行&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -f $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件为普通文件&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件为特殊文件&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -d $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件是个目录&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件不是个目录&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -s $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件不为空&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件为空&quot;</span><br><span class="line">fi</span><br><span class="line">if [ -e $file ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;文件存在&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;文件不存在&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h2 id="Shell-流程控制"><a href="#Shell-流程控制" class="headerlink" title="Shell 流程控制 "></a><font color="#0000FF">Shell 流程控制 </font></h2><ol>
<li><strong>if else</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition</span><br><span class="line">then</span><br><span class="line">    command1 </span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">else</span><br><span class="line">    command</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p><strong>if else-if else</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition1</span><br><span class="line">then</span><br><span class="line">    command1</span><br><span class="line">elif condition2 </span><br><span class="line">then </span><br><span class="line">    command2</span><br><span class="line">else</span><br><span class="line">    commandN</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>for 循环</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 ... itemN</span><br><span class="line">do</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>in列表是可选的，如果不用它，for循环使用命令行的位置参数。</p>
<p>demo1:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for loop in 1 2 3 4 5</span><br><span class="line">do</span><br><span class="line">    echo &quot;The value is: $loop&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The value is: 1</span><br><span class="line">The value is: 2</span><br><span class="line">The value is: 3</span><br><span class="line">The value is: 4</span><br><span class="line">The value is: 5</span><br></pre></td></tr></table></figure>
<p>demo2:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for str in &apos;This is a string&apos;</span><br><span class="line">do</span><br><span class="line">    echo $str</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is a string</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>while 语句</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>demo1：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">int=1</span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do  </span><br><span class="line">    let &quot;int++&quot;</span><br><span class="line">done</span><br><span class="line">echo $int</span><br></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure></p>
<p>demo2:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">int=1</span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do</span><br><span class="line">    let int++</span><br><span class="line">done</span><br><span class="line">echo $int</span><br></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure></p>
<p>demo3:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;按下 &lt;CTRL-D&gt; 退出&apos;</span><br><span class="line">echo -n &apos;输入你最喜欢的网站名: &apos;</span><br><span class="line">while read FILM</span><br><span class="line">do</span><br><span class="line">    echo &quot;是的！$FILM 是一个好网站&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li><p><strong>无限循环</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">for (( ; ; ))</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>until 循环</strong></p>
</li>
</ol>
<p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>demo:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">a=0</span><br><span class="line"></span><br><span class="line">until [ ! $a -lt 10 ]</span><br><span class="line">do</span><br><span class="line">   echo $a</span><br><span class="line">   a=`expr $a + 1`</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<ol start="7">
<li><strong>case</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">case 值 in</span><br><span class="line">模式1)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">模式2）</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>取值后面必须为单词in</li>
<li>每一模式必须以右括号结束</li>
<li>匹配发现取值符合某一模式后，其间所有命令开始执行直至 ;;</li>
<li>每个case分支用右圆括号，用两个分号表示break</li>
<li>如果无一匹配模式，使用星号 * 捕获该值</li>
<li>esac（就是case反过来）作为结束标记</li>
</ul>
<p>demo:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;输入 1 到 4 之间的数字:&apos;</span><br><span class="line">echo &apos;你输入的数字为:&apos;</span><br><span class="line">read aNum</span><br><span class="line">case $aNum in</span><br><span class="line">    1)  echo &apos;你选择了 1&apos;</span><br><span class="line">    ;;</span><br><span class="line">    2)  echo &apos;你选择了 2&apos;</span><br><span class="line">    ;;</span><br><span class="line">    3)  echo &apos;你选择了 3&apos;</span><br><span class="line">    ;;</span><br><span class="line">    4)  echo &apos;你选择了 4&apos;</span><br><span class="line">    ;;</span><br><span class="line">    *)  echo &apos;你没有输入 1 到 4 之间的数字&apos;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<h2 id="Shell-函数"><a href="#Shell-函数" class="headerlink" title="Shell 函数 "></a><font color="#0000FF">Shell 函数 </font></h2><ol>
<li><strong>定义</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[ function ] funname [()]</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    action;</span><br><span class="line"></span><br><span class="line">    [return int;]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</li>
<li>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255)</li>
</ul>
<ol start="2">
<li><strong>返回值</strong></li>
</ol>
<p>demo1：（无return关键词）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:菜鸟教程</span><br><span class="line"># url:www.runoob.com</span><br><span class="line"></span><br><span class="line">demoFun()&#123;</span><br><span class="line">    echo &quot;这是我的第一个 shell 函数!&quot;</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;-----函数开始执行-----&quot;</span><br><span class="line">demoFun</span><br><span class="line">echo &quot;-----函数执行完毕-----&quot;</span><br></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-----函数开始执行-----</span><br><span class="line">这是我的第一个 shell 函数!</span><br><span class="line">-----函数执行完毕-----</span><br></pre></td></tr></table></figure></p>
<p>demo2：（带return关键词）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:菜鸟教程</span><br><span class="line"># url:www.runoob.com</span><br><span class="line"></span><br><span class="line">funWithReturn()&#123;</span><br><span class="line">    echo &quot;这个函数会对输入的两个数字进行相加运算...&quot;</span><br><span class="line">    echo &quot;输入第一个数字: &quot;</span><br><span class="line">    read aNum</span><br><span class="line">    echo &quot;输入第二个数字: &quot;</span><br><span class="line">    read anotherNum</span><br><span class="line">    echo &quot;两个数字分别为 $aNum 和 $anotherNum !&quot;</span><br><span class="line">    return $(($aNum+$anotherNum))</span><br><span class="line">&#125;</span><br><span class="line">funWithReturn</span><br><span class="line">echo &quot;输入的两个数字之和为 $? !&quot;</span><br></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">这个函数会对输入的两个数字进行相加运算...</span><br><span class="line">输入第一个数字: </span><br><span class="line">1</span><br><span class="line">输入第二个数字: </span><br><span class="line">2</span><br><span class="line">两个数字分别为 1 和 2 !</span><br><span class="line">输入的两个数字之和为 3 !</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li><strong>函数参数</strong></li>
</ol>
<p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 \$n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数…</p>
<p>注意，$10 不能获取第十个参数，获取第十个参数需要${10}。当n&gt;=10时，需要使用${n}来获取参数。 </p>
<p>带参数的函数示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># author:</span><br><span class="line"># url:</span><br><span class="line"></span><br><span class="line">funWithParam()&#123;</span><br><span class="line">    echo &quot;第一个参数为 $1 !&quot;</span><br><span class="line">    echo &quot;第二个参数为 $2 !&quot;</span><br><span class="line">    echo &quot;第十个参数为 $10 !&quot;</span><br><span class="line">    echo &quot;第十个参数为 $&#123;10&#125; !&quot;</span><br><span class="line">    echo &quot;第十一个参数为 $&#123;11&#125; !&quot;</span><br><span class="line">    echo &quot;参数总数有 $# 个!&quot;</span><br><span class="line">    echo &quot;作为一个字符串输出所有参数 $* !&quot;</span><br><span class="line">&#125;</span><br><span class="line">funWithParam 1 2 3 4 5 6 7 8 9 34 73</span><br></pre></td></tr></table></figure></p>
<p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一个参数为 1 !</span><br><span class="line">第二个参数为 2 !</span><br><span class="line">第十个参数为 10 !</span><br><span class="line">第十个参数为 34 !</span><br><span class="line">第十一个参数为 73 !</span><br><span class="line">参数总数有 11 个!</span><br><span class="line">作为一个字符串输出所有参数 1 2 3 4 5 6 7 8 9 34 73 !</span><br></pre></td></tr></table></figure></p>
<p>特殊字符:</p>
<p>参数处理  |  说明<br>：–：|：–<br>$#  |  传递到脚本的参数个数<br>$<em>  |  以一个单字符串显示所有向脚本传递的参数<br>$$  |  脚本运行的当前进程ID号<br>$!  |  后台运行的最后一个进程的ID号<br>$@  |  与$</em>相同，但是使用时加引号，并在引号中返回每个参数。<br>$-  |  显示Shell使用的当前选项，与set命令功能相同。<br>$?  |  显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</p>
<h2 id="文件io"><a href="#文件io" class="headerlink" title="文件io"></a><table><tr><td bgcolor="#C7C7C7">文件io</td></tr></table></h2><h2 id="获取命令行参数"><a href="#获取命令行参数" class="headerlink" title="获取命令行参数"></a><table><tr><td bgcolor="#C7C7C7">获取命令行参数</td></tr></table></h2><h3 id="获取参数个数"><a href="#获取参数个数" class="headerlink" title="获取参数个数"></a><font color="#0000FF">获取参数个数</font></h3><p>count=$#</p>
<h3 id="获取某个参数"><a href="#获取某个参数" class="headerlink" title="获取某个参数"></a><font color="#0000FF">获取某个参数</font></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">param1=$1</span><br><span class="line">param2=$2</span><br></pre></td></tr></table></figure>
<h3 id="获取运行状态"><a href="#获取运行状态" class="headerlink" title=" 获取运行状态 "></a><font color="#0000FF"> 获取运行状态 </font></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">do something</span><br><span class="line">if [ $? -ne 0 ];then</span><br><span class="line">echo &apos;do something failed!!!&apos;</span><br><span class="line">else</span><br><span class="line">echo &apos;do something ok!!!&apos;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
    </div>
    
    <div class="post-footer">
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2018/12/07/网络通信之信号驱动IO篇/" class="pre-post btn btn-default" title="【原理】 网络通信之信号驱动IO篇">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">【原理】 网络通信之信号驱动IO篇</span>
        </a>
    
    
        <a href="/2018/12/06/story-index/" class="next-post btn btn-default" title="【故事】文章封面故事">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">【故事】文章封面故事</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
    
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'XWA5gq7VCJybw7YQhf5HG20r-gzGzoHsz',
            appKey: '8FW1WEwrysHXaUD1bhGn2Rp8',
            placeholder: '说点什么吧',
            notify: true,
            verify: false,
            avatar: 'https://blog.xtcgch.ink/img/comment-avatar.jpg',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、进程"><span class="toc-text">一、进程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、查看进程状态"><span class="toc-text">1、查看进程状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、杀死进程"><span class="toc-text">2、杀死进程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、daemon-process（守护进程）"><span class="toc-text">3、daemon process（守护进程）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、查看磁盘空间"><span class="toc-text">二、查看磁盘空间</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、df"><span class="toc-text">1、df</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、du"><span class="toc-text">2、du</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、常用命令"><span class="toc-text">3、常用命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、挂载"><span class="toc-text">三、挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、mount-t-vfstype-o-options-device-dir"><span class="toc-text">1、mount [-t vfstype] [-o options] device dir</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、umount"><span class="toc-text">2、umount</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、perl"><span class="toc-text">四、perl</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、perl脚本"><span class="toc-text">1、perl脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、perl实现daemon"><span class="toc-text">2、perl实现daemon</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、软件管理"><span class="toc-text">五、软件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、安装"><span class="toc-text">1、安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、更新"><span class="toc-text">2、更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、删除"><span class="toc-text">3、删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、查询一个包是否被安装"><span class="toc-text">4、查询一个包是否被安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、得到被安装的包的信息"><span class="toc-text">5、得到被安装的包的信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、列出该包中有哪些文件"><span class="toc-text">6、列出该包中有哪些文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、列出所有被安装的rpm-package"><span class="toc-text">7、列出所有被安装的rpm package</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8、显示与目标包名相关的包"><span class="toc-text">8、显示与目标包名相关的包</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六、查看程序的安装"><span class="toc-text">六、查看程序的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、安装路径"><span class="toc-text">1、安装路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、软件版本"><span class="toc-text">2、软件版本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#七、tcp连接状态"><span class="toc-text">七、tcp连接状态</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、查看8080端口上已经建立连接的tcp连接数"><span class="toc-text">1、查看8080端口上已经建立连接的tcp连接数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#八、网络相关"><span class="toc-text">八、网络相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#九、查看系统信息"><span class="toc-text">九、查看系统信息</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、内核及发行版"><span class="toc-text">1、内核及发行版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、CPU硬件"><span class="toc-text">2、CPU硬件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、内存情况"><span class="toc-text">3、内存情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、磁盘、Swap情况"><span class="toc-text">4、磁盘、Swap情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、网络情况"><span class="toc-text">5、网络情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、网络协议和端口方面（root）："><span class="toc-text">6、网络协议和端口方面（root）：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、网络路由（root）："><span class="toc-text">7、网络路由（root）：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8、查看打开文件："><span class="toc-text">8、查看打开文件：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9、任务管理器"><span class="toc-text">9、任务管理器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、发送http请求"><span class="toc-text">1、发送http请求</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#一些例子"><span class="toc-text">一些例子</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell-不完整教程"><span class="toc-text">Shell 不完整教程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-变量"><span class="toc-text">Shell 变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-字符串"><span class="toc-text">Shell 字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-数组"><span class="toc-text">Shell 数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-传递参数"><span class="toc-text">Shell 传递参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-基本运算符"><span class="toc-text">Shell 基本运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-流程控制"><span class="toc-text">Shell 流程控制 </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-函数"><span class="toc-text">Shell 函数 </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件io"><span class="toc-text">文件io</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#获取命令行参数"><span class="toc-text">获取命令行参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取参数个数"><span class="toc-text">获取参数个数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取某个参数"><span class="toc-text">获取某个参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取运行状态"><span class="toc-text"> 获取运行状态 </span></a></li></ol></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2018
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>